<!--
  @license
  Copyright 2018 Google LLC. All Rights Reserved.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  =============================================================================
  -->
<html>

<head>
  <meta charset="utf-8">
  <!-- <script src="../../dist/tfjs-vis.umd.js"></script> -->
  <script src="./index.js"></script>


  <style>
    article {
      max-width: 960px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      padding: 40px;
    }

    script.show-script {
      display: block;
      max-width: 720px;
      background-color: floralwhite;
      font-family: "Lucida Console", Monaco, "Courier New", Courier, monospace;
      font-size: 12px;
      margin-left: -40px;
      white-space: pre;
    }

    article div {
      margin-bottom: 25px;
    }

    h3 {
      margin-top: 60px;
    }
  </style>
</head>

<body>
  <article>
    <h1>tfjs-vis kitchen sink</h1>

    <section>
      <p>
        tfjs-vis is a small set of visualization utilities to make it easier to understand what is going on with your tfjs models.
        It is designed in a way to work along side regular web apps. This page is a testbed for the api.
      </p>
      <script class='show-script' type="module">
        // import * as tfvis from 'tfjs-vis'
      </script>
    </section>

    <section>
      <h2>Visor</h2>
      <script class='show-script'>
        function showVisor() {
          visorInstance = tfvis.visor();
          visorInstance.surface({ name: 'Surface 1' });
          visorInstance.surface({ name: 'Surface 2' });

          visorInstance.surface({ name: 'Surface 3', tab: 'Tab 2' });
        }
        showVisor();
      </script>
    </section>

    <hr>

    <section>
      <h2>Render Functions</h2>

      <h3>render.barchart(data, container, options)</h3>
      <div id='barchart-cont'></div>
      <script class='show-script'>
        function renderBarchart() {
          const data = [
            { index: 0, value: 50 },
            { index: 1, value: 100 },
            { index: 2, value: 150 },
          ];

          // Render to visor
          const surface = tfvis.visor().surface({ name: 'Barchart', tab: 'Charts' });
          tfvis.render.barchart(data, surface, {});

          // Render to page
          const container = document.getElementById('barchart-cont');
          tfvis.render.barchart(data, container, {
            xLabel: 'my x axis',
            yLabel: 'values',
            width: 500,
            height: 250,
          });
        }
        renderBarchart();

      </script>

      <h4>Re-rendering</h4>
      <p>You can update a bar chart by calling
        <code>render.barchart</code> again with the same
        <code>container</code>.
      </p>

      <div id='barchart-multi'></div>
      <script class='show-script'>
        async function renderBarchartMultipleTimes(numRenders, numVals) {
          const genData = function (numVals) {
            return Array(numVals).fill(0).map((d, i) => {
              return { index: i, value: (Math.random() * 50) + 50 };
            });
          };

          console.time(`renderBarchart:${numVals}:${numRenders}`);
          for (let i = 0; i < numRenders; i++) {
            const data = genData(numVals);
            const container = document.getElementById('barchart-multi');
            await tfvis.render.barchart(data, container, {
              xLabel: 'my x axis',
              yLabel: 'values',
              width: 800,
              height: 250,
            });
          }
          console.timeEnd(`renderBarchart:${numVals}:${numRenders}`);

        }

        const numRenders = 10;
        const numVals = 100;
        renderBarchartMultipleTimes(numRenders, numVals);
      </script>

      <hr>

      <h3>render.table(data, container)</h3>

      <div id='table-cont'></div>

      <script class='show-script'>
        function renderTable() {
          const headers = [
            'Col1',
            'Col 2',
            '<em>Column 3</em>',
          ];

          const values = [
            [1, 2, 3],
            ['4', '5', '6'],
            ['<strong>7</strong>', true, false],
          ];

          const container = document.getElementById('table-cont');

          // Render to visor
          const surface = tfvis.visor().surface({ name: 'Table', tab: 'Charts' });
          tfvis.render.table({ headers, values }, surface);

          // Render to page
          tfvis.render.table({ headers, values }, container);
        }
        renderTable();
      </script>

      <hr>

      <h3>render.histogram(data, container, opts)</h3>

      <div id='histogram-cont'></div>

      <script class='show-script'>
        function renderHistogram() {
          const data = Array(100).fill(0)
            .map(x => Math.random() * 100 - (Math.random() * 50))
            .map(x => ({ value: x }));
          const container = document.getElementById('histogram-cont');

          // Render to visor
          const surface = tfvis.visor().surface({ name: 'Histogram', tab: 'Charts' });
          tfvis.render.histogram(data, surface);

          // Render to page
          tfvis.render.histogram(data, container);
        }
        renderHistogram();
      </script>

      <hr>

    </section>

  </article>

</body>

</html>
